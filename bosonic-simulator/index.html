<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Bosonic Simulator</title>
  <link rel="stylesheet" href="/bosonic-simulator/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

<!-- Spinner element - Positioned fixed at the top-right of the screen -->
<div id="spinner" class="spinner"></div>

<h1>Bosonic Simulator Description</h1>

<div id="simulator-description">
  <p><i>Scroll down for the simulator.</i></p>
  <h2>Simulator Features</h2>
  <ul>
      <li><strong>Prepare Gaussian States for Superposition:</strong> Start with a vacuum state and apply a series of Gaussian unitaries to create individual Gaussian states. These states are then used as the building blocks for your quantum superposition (see sections <i>Supported Gaussian Unitaries</i> and <i>Superposition Terms</i>).</li>
      <li><strong>Build Superpositions:</strong> Combine the prepared Gaussian states into a quantum superposition, where each state is weighted by a complex coefficient. This allows you to represent a range of quantum states (see section <i>Superposition Terms</i>).</li>
      <li><strong>Apply Global Unitaries:</strong> Apply additional Gaussian unitaries to the entire superposition of states, modifying the overall quantum state (see section <i>Global Circuit</i>).</li>
      <li><strong>Perform Measurements:</strong> After applying global unitaries, perform quantum measurements on the resulting state. You can measure the probability of specific outcomes or visualize the probability density function of modes (see sections <i>Measurements</i> and <i>Phase-Space Plots</i>).</li>
  </ul>


  <h2>Supported Gaussian Unitaries</h2>
  <p>The following Gaussian unitaries are supported in the simulator:</p>
  <ol>
      <li>n-mode displacement operators \( D(\alpha), \alpha \in \mathbb{C}^n \),</li>
      <li>Single-mode phase shifters \( F_j(\phi), \phi \in \mathbb{R} \) applied to mode \( j \in \{0, 1, \dots, n-1\} \),</li>
      <li>Single-mode squeezing operators \( S_j(z), z \geq 1 \) applied to mode \( j \in \{0, 1, \dots, n-1\} \), and</li>
      <li>Beamsplitters \( B_{j,k}(\omega), \omega \in \mathbb{R}, j \neq k \) applied to modes \( j, k \in \{0, 1, \dots, n-1\} \).</li>
  </ol>
  <p>The group of Gaussian unitaries is generated by these operators.</p>

  <h2>Input Notes</h2>
  <div class="note">
      <p><strong>Adhere <i>strictly</i> to the input format:</strong></p>
      <ul>
          <li>Read the format examples next to the input fields carefully.</li>
          <li><i>Complex numbers</i> must be written in the format \( a+bi \), where \( a \) and \( b \) are real numbers. Note: Do not use parentheses for real and imaginary parts, and always write a plus sign (e.g., <i>-1.234 + -1.234i</i> is the correct format, not <i>-1.234 - 1.234i</i> or <i>(-1.234) + (-1.234)i</i>). Always specify both the real and imaginary parts using explicit numerical values. Inputs such as <i>1</i>, <i>2i</i>, and <i>1 + i</i> are not allowed.</li>
          <li>For vector/list inputs (e.g., "Wires" or "Displacement" fields), separate the entries with commas. Examples: <i>1,2,3,4</i> and <i>1+1i, -1+-1i, 0+-2i</i>.</li>
      </ul>
      <p><strong class="highlight">Reducing the resolution can speed up plot rendering.</strong> For small circuits and resolution set to 15, it should take up to 5-20 seconds.</p>
      <p><strong class="highlight">If no output is produced, please verify that your input is correct.</strong> Errors will not be displayed for invalid input.</p>
  </div>

  <h2>Additional Features</h2>
  <p>Use the "Normalize" button to automatically normalize the coefficients of a superposition of Gaussian states (see section <i>Normalize Superposition Coefficients</i>).</p>
  <p>Preserve your progress by saving the URL currently displayed in your browser. All circuit data is encoded within the link.</p>
  <p>The circuit images are generated using IBM Qiskit.</p>

  <h2>References</h2>
  <blockquote>
      <p>Beatriz Dias and Robert König. Classical simulation of non-Gaussian bosonic circuits. <i>Phys. Rev. A</i>, 110:042402, Oct 2024.</p>
  </blockquote>
</div>

<hr class="bigsection-divider">

<h1>Bosonic Simulator</h1>

Modes:
<input id="numModes" type="number" value="4" min="1">
<button onclick="setModes()">Set</button>

<p class="warning">
  <strong>Careful:</strong> clicking "Set" erases all circuit data.
</p>

<hr>

<h2>Superposition Terms</h2>
<button onclick="addTerm()">Add term</button>
<div id="terms"></div>

<hr>

<h2>Normalize Superposition Coefficients</h2>
<button onclick="normalizeSuperposition()">Normalize</button>

<hr>

<h2>Global Circuit</h2>
<img id="globalCircuit">

<h3>Global Gates</h3>

Phase Shift:
<input id="globalFMode" size="2" placeholder="j">
<span style="font-size: 0.9em; color: #555;">e.g., <code>2</code> or <code>4</code></span>
<input id="globalFAngle" size="4" placeholder="ω">
<span style="font-size: 0.9em; color: #555;">e.g., <code>0.23</code>, <code>123.4567</code>, or <code>5</code></span>
<button onclick="addGlobalGate('F')">Add F</button>

<br><br>

Squeeze:
<input id="globalSMode" size="2" placeholder="j">
<span style="font-size: 0.9em; color: #555;">e.g., <code>2</code> or <code>4</code></span>
<input id="globalSZ" size="4" placeholder="z">
<span style="font-size: 0.9em; color: #555;">e.g., <code>0.23</code>, <code>123.4567</code>, or <code>5</code></span>
<button onclick="addGlobalGate('S')">Add S</button>

<br><br>

Displacement:
<input id="globalAlpha" placeholder="α">
<span style="font-size: 0.9em; color: #555;">e.g., <code>-1+0i,1+-1i,5+-2i</code> or <code>1+1i,2+2i</code></span>
<button onclick="addGlobalGate('D')">Add D</button>

<br><br>

Beamsplitter:
<input id="globalBJ" size="2" placeholder="j">
<span style="font-size: 0.9em; color: #555;">e.g., <code>2</code> or <code>4</code></span>
<input id="globalBK" size="2" placeholder="k">
<span style="font-size: 0.9em; color: #555;">e.g., <code>2</code> or <code>4</code></span>
<input id="globalBOmega" size="4" placeholder="ω">
<span style="font-size: 0.9em; color: #555;">e.g., <code>0.23</code>, <code>123.4567</code>, or <code>5</code></span>
<button onclick="addGlobalGate('B')">Add B</button>

<br><br>

<button onclick="deleteGlobalGate()">Delete last global gate</button>

<hr>

<h2>Measurement</h2>
Wires: <input id="mWires" value="0">
Amplitude: <input id="mAmp" value="1+0i">
<label style="margin-left: 0px">
  <input type="checkbox" id="mUseRandomized" style="width: 16px" onchange="toggleRandAlgoOptions()">
</label>
use a randomized algorithm (single-mode systems only, due to a higher runtime constant factor)
<label style="margin-left: 10px"></label>
Energy Upper Bound: <input id="mEnergyUpperBound" value="10">
<p style="font-size: 0.85em; color: #666; margin-top: 6px;" id = "mRandAlgoComment">
  Assuming the post-measurement state energy is bounded by the specified value,
  the randomized algorithm returns, with probability at least 75%, an estimate
  with multiplicative error at most 75%. The runtime scales linearly with both the energy bound and the number of superposition terms.
</p>
<hr>

<button onclick="simulate()">Simulate</button>
<pre id="output"></pre>

<hr>

<h2>Phase-Space Plots</h2>

Wires:
<input id="plotWires" value="0">

Resolution:
<input id="plotResolution" type="number" value="15" min="5" max="50">

<button onclick="generatePlots()">Generate plots for wires</button>

<div id="plots"></div>


<script src="app.js"></script>
</body>
</html>
